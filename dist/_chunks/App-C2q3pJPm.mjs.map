{"version":3,"file":"App-C2q3pJPm.mjs","sources":["../../admin/src/utils/date-time.ts","../../admin/src/components/signed-tokens-provider.tsx","../../admin/src/components/asset-grid/asset-card.tsx","../../admin/src/components/asset-grid/index.tsx","../../admin/src/utils/url.ts","../../admin/src/components/list-pagination/utils.ts","../../admin/src/components/list-pagination/index.tsx","../../admin/src/types.ts","../../server/src/utils/text-tracks.ts","../../types/shared-types.ts","../../admin/src/utils/use-plugin-intl.ts","../../admin/src/components/file-input/index.tsx","../../admin/src/components/modal-new-upload/custom-text-track-form.tsx","../../admin/src/components/modal-new-upload/new-upload.ts","../../admin/src/components/modal-new-upload/upload-error.tsx","../../admin/src/components/modal-new-upload/uploaded.tsx","../../admin/src/components/modal-new-upload/uploading.tsx","../../admin/src/components/modal-new-upload/modal-new-upload.tsx","../../admin/src/components/header/index.tsx","../../admin/src/components/preview-player/index.tsx","../../admin/src/components/modal-details/summary.tsx","../../admin/src/components/modal-details/modal-details.tsx","../../admin/src/pages/HomePage.tsx","../../admin/src/pages/App.tsx"],"sourcesContent":["import { Duration } from 'luxon';\n\nconst secondsToFormattedString = (seconds: number) => {\n  const date = Duration.fromMillis(seconds * 1000);\n  const parts = date.shiftTo('hours', 'minutes', 'seconds').toObject();\n\n  const secs = parts.seconds && Math.round(parts.seconds).toString().padStart(2, '0');\n\n  if (parts.hours === 0) {\n    return `${parts.minutes}:${secs}`;\n  } else {\n    const mins = parts.minutes?.toString().padStart(2, '0');\n    return `${parts.hours}:${mins}:${secs}`;\n  }\n};\n\nexport { secondsToFormattedString };\n","import React from 'react';\nimport { useFetchClient } from '@strapi/strapi/admin';\n\nimport { MuxAsset } from '../../../server/src/content-types/mux-asset/types';\nimport { PLUGIN_ID } from '../pluginId';\n\ntype SignFunction = (muxAsset: MuxAsset) => Promise<string | null>;\n\nexport const SignedTokensContext = React.createContext<{\n  video: SignFunction;\n  thumbnail: SignFunction;\n  storyboard: SignFunction;\n  animated: SignFunction;\n}>({\n  video: async () => null,\n  thumbnail: async () => null,\n  storyboard: async () => null,\n  animated: async () => null,\n});\n\nexport function useSignedTokens() {\n  return React.useContext(SignedTokensContext);\n}\n\nexport default function SignedTokensProvider({ muxAsset, children }: React.PropsWithChildren<{ muxAsset?: MuxAsset }>) {\n  const { get } = useFetchClient();\n\n  const video: SignFunction = async function (muxAsset) {\n    const { data } = await get(`${PLUGIN_ID}/sign/${muxAsset.playback_id}?type=video`);\n\n    return data.token;\n  };\n\n  const thumbnail: SignFunction = async function (muxAsset) {\n    const { data } = await get(`${PLUGIN_ID}/sign/${muxAsset.playback_id}?type=thumbnail`);\n\n    return data.token;\n  };\n\n  const storyboard: SignFunction = async function (muxAsset) {\n    const { data } = await get(`${PLUGIN_ID}/sign/${muxAsset.playback_id}?type=storyboard`);\n\n    return data.token;\n  };\n\n  const animated: SignFunction = async function (muxAsset) {\n    const { data } = await get(`${PLUGIN_ID}/sign/${muxAsset.playback_id}?type=animated`);\n\n    return data.token;\n  };\n\n  return (\n    <SignedTokensContext.Provider\n      value={{\n        video,\n        thumbnail,\n        storyboard,\n        animated,\n      }}\n    >\n      {children}\n    </SignedTokensContext.Provider>\n  );\n}\n","import React from 'react';\nimport { useIntl } from 'react-intl';\nimport { Flex } from '@strapi/design-system';\nimport styled from 'styled-components';\nimport { Earth, Lock, WarningCircle } from '@strapi/icons';\nimport {\n  Box,\n  Card,\n  CardHeader,\n  CardBody,\n  CardAsset,\n  CardTimer,\n  CardContent,\n  CardBadge,\n  CardTitle,\n  CardSubtitle,\n  Loader,\n} from '@strapi/design-system';\n\nimport { getTranslation } from '../../utils/getTranslation';\nimport { secondsToFormattedString } from '../../utils/date-time';\nimport { MuxAsset } from '../../../../server/src/content-types/mux-asset/types';\nimport { PLUGIN_ID } from '../../pluginId';\nimport { useSignedTokens } from '../signed-tokens-provider';\n\nconst BoxStyled = styled(Box)`\n  cursor: pointer;\n\n  svg {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n`;\n\nconst CardTitleStyled = styled(CardTitle)`\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  min-height: 2.66em;\n`;\n\ninterface Props {\n  muxAsset: MuxAsset;\n  onClick?: (muxAsset: MuxAsset) => void;\n}\n\nconst AssetCard = (props: Props) => {\n  const { muxAsset, onClick = () => {} } = props;\n\n  const [thumbnailImageUrl, setThumbnailImageUrl] = React.useState<string>(\n    // Empty pixel\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII='\n  );\n\n  const { formatMessage, formatDate } = useIntl();\n  const { thumbnail } = useSignedTokens();\n\n  const isLoading = muxAsset.asset_id === null;\n\n  const init = async (muxAsset: MuxAsset) => {\n    const { playback_id } = muxAsset;\n    if (muxAsset.playback_id !== null && muxAsset.signed) {\n      const token = await thumbnail(muxAsset);\n      setThumbnailImageUrl(`/${PLUGIN_ID}/thumbnail/${playback_id}?token=${token}`);\n    } else if (muxAsset.playback_id !== null) {\n      setThumbnailImageUrl(`/${PLUGIN_ID}/thumbnail/${playback_id}`);\n    }\n  };\n\n  React.useEffect(() => {\n    init(muxAsset);\n  }, []);\n\n  const renderCardAssetStatus = React.useCallback(() => {\n    if (muxAsset.error_message !== null) {\n      return (\n        <Flex>\n          <WarningCircle fill=\"danger500\" />\n        </Flex>\n      );\n    } else if (isLoading || !muxAsset.playback_id) {\n      return (\n        <Flex>\n          <Loader small>{formatMessage({ id: getTranslation('AssetCard.loading'), defaultMessage: 'Loading' })}</Loader>\n        </Flex>\n      );\n    }\n  }, [muxAsset]);\n\n  const handleOnClick = () => {\n    onClick(muxAsset);\n  };\n\n  const loadingTitle =\n    isLoading &&\n    formatMessage({\n      id: getTranslation('AssetCard.is-loading'),\n      defaultMessage: 'Asset is being processed',\n    });\n\n  const errorTitle =\n    isLoading &&\n    formatMessage({\n      id: getTranslation('AssetCard.is-error'),\n      defaultMessage: 'Asset encountered an error',\n    });\n\n  const aspect_ratio = muxAsset.aspect_ratio || muxAsset.asset_data?.aspect_ratio;\n  const statusLabel = (() => {\n    if (aspect_ratio) return aspect_ratio;\n\n    if (muxAsset.isReady)\n      return formatMessage({\n        id: getTranslation('AssetCard.no-aspect-ratio'),\n        defaultMessage: 'No aspect ratio',\n      });\n\n    if (muxAsset.error_message !== null)\n      return formatMessage({\n        id: getTranslation('AssetCard.processing-error'),\n        defaultMessage: 'Error',\n      });\n\n    return formatMessage({\n      id: getTranslation('AssetCard.processing-pending'),\n      defaultMessage: 'Processing',\n    });\n  })();\n\n  return (\n    <BoxStyled onClick={handleOnClick} title={errorTitle || loadingTitle || undefined}>\n      <Card>\n        <CardHeader>\n          <CardAsset src={thumbnailImageUrl} style={{ objectFit: 'cover' }}>\n            {renderCardAssetStatus()}\n          </CardAsset>\n          {muxAsset.duration && <CardTimer>{secondsToFormattedString(muxAsset.duration)}</CardTimer>}\n        </CardHeader>\n        <CardBody>\n          <CardContent>\n            <CardTitleStyled title={muxAsset.title}>{muxAsset.title}</CardTitleStyled>\n            <CardSubtitle>\n              {muxAsset.createdAt ? formatDate(muxAsset.createdAt) : null} - {statusLabel}\n            </CardSubtitle>\n          </CardContent>\n          <CardBadge>\n            {/* <Tooltip label={muxAsset.signed ? 'Private Playback' : 'Public Playback'}>\n              {muxAsset.signed ? <Lock /> : <Earth />}\n            </Tooltip> */}\n            <span title={muxAsset.signed ? 'Private Playback' : 'Public Playback'}>\n              {muxAsset.signed ? <Lock /> : <Earth />}\n            </span>\n          </CardBadge>\n        </CardBody>\n      </Card>\n    </BoxStyled>\n  );\n};\n\nexport default AssetCard;\n","import React from 'react';\nimport { Box, Flex, Grid, Typography } from '@strapi/design-system';\nimport { useIntl } from 'react-intl';\n\nimport { MuxAsset } from '../../../../server/src/content-types/mux-asset/types';\nimport AssetCard from './asset-card';\nimport { getTranslation } from '../../utils/getTranslation';\n\ninterface Props {\n  muxAssets: MuxAsset[] | undefined;\n  onMuxAssetClick?: (muxAsset: MuxAsset) => void;\n}\n\nconst AssetGrid = (props: Props) => {\n  const { muxAssets, onMuxAssetClick = () => {} } = props;\n\n  const { formatMessage } = useIntl();\n\n  if (muxAssets === undefined) return null;\n\n  if (muxAssets.length === 0)\n    return (\n      <Flex justifyContent=\"center\" padding={5}>\n        <Typography variant=\"omega\" textColor=\"neutral700\">\n          {formatMessage({\n            id: getTranslation('HomePage.no-assets'),\n            defaultMessage: 'No assets found',\n          })}\n        </Typography>\n      </Flex>\n    );\n\n  const assets = muxAssets.map((muxAsset) => (\n    <Grid.Item col={3} m={4} xs={12} s={6} key={muxAsset.id}>\n      <Box width=\"100%\">\n        <AssetCard muxAsset={muxAsset} onClick={onMuxAssetClick} />\n      </Box>\n    </Grid.Item>\n  ));\n\n  return (\n    <Box paddingTop={6} paddingBottom={8}>\n      <Grid.Root gap={4}>{assets}</Grid.Root>\n    </Box>\n  );\n};\n\nexport default AssetGrid;\n","const appendQueryParameter = (location: Location | any, queryParameters: { [key: string]: string }): Location => {\n  const params = new URLSearchParams(location.search);\n\n  for (let key in queryParameters) {\n    params.set(key, queryParameters[key]);\n  }\n\n  return { ...location, search: params.toString() };\n};\n\nexport { appendQueryParameter };\n","export interface PageItem {\n  type: 'PageItem';\n  label: string;\n  value: number;\n  active: boolean;\n}\n\nexport interface DotsItem {\n  type: 'DotsItem';\n  display: boolean;\n  value: number;\n  additional?: number;\n}\n\nconst clamp = (value: number, min: number, max: number) => Math.min(Math.max(value, min), max);\n\ntype FirstFunctionResponse = PageItem[];\n\ninterface FirstFunctionParams {\n  pages: number;\n  activePage: number;\n}\n\ntype FirstFunction = (params: FirstFunctionParams) => FirstFunctionResponse;\n\nexport const first: FirstFunction = function (params) {\n  const { pages, activePage } = params;\n\n  return Array.from({ length: clamp(pages, 1, 3) }, (x, i) => ({\n    type: 'PageItem',\n    label: (i + 1).toString(),\n    value: i + 1,\n    active: activePage === i + 1,\n  }));\n};\n\ninterface MiddleFunctionResponse {\n  dotsStart: DotsItem;\n  dotsEnd: DotsItem;\n  items: PageItem[];\n}\n\ninterface MiddleFunctionParams {\n  pages: number;\n  activePage: number;\n}\n\ntype MiddleFunction = (params: MiddleFunctionParams) => MiddleFunctionResponse;\n\nexport const middle: MiddleFunction = function (params) {\n  const { pages, activePage } = params;\n\n  const dotsStart: DotsItem = {\n    type: 'DotsItem',\n    display: false,\n    value: 0,\n    additional: undefined,\n  };\n\n  const dotsEnd: DotsItem = {\n    type: 'DotsItem',\n    display: false,\n    value: 1,\n    additional: undefined,\n  };\n\n  if (pages < 4) return { dotsStart, dotsEnd, items: [] };\n\n  const arr = Array.from({ length: pages }).map((_value, index) => index + 1);\n  arr.splice(0, 3);\n  const omega = arr.length > 6 ? arr.splice(arr.length - 3, 3) : [];\n\n  const cursor = { start: 0, end: 0 };\n  const midActiveIndex = arr.findIndex((value) => value === activePage);\n\n  if (activePage < 4) {\n    cursor.start = 0;\n  } else if (midActiveIndex !== -1 && arr.length - 1 === midActiveIndex) {\n    cursor.start = midActiveIndex - 2;\n  } else if (midActiveIndex !== -1) {\n    cursor.start = midActiveIndex !== 0 ? midActiveIndex - 1 : 0;\n  } else {\n    cursor.start = arr.length > 2 ? arr.length - 3 : 0;\n  }\n\n  cursor.end = cursor.start + 3;\n\n  const items: PageItem[] = new Array();\n\n  dotsStart.display = activePage > 5 && pages > 7;\n  dotsStart.additional = dotsStart.display ? cursor.start : undefined;\n  dotsEnd.display = omega.length > 0 && cursor.end < arr.length;\n  dotsEnd.additional = omega.length > 0 && cursor.end < arr.length ? arr.length - cursor.end : undefined;\n\n  items.push(\n    ...arr.slice(cursor.start, cursor.end).map(\n      (value) =>\n        ({\n          type: 'PageItem',\n          label: value.toString(),\n          value,\n          active: activePage === value,\n        }) as PageItem\n    )\n  );\n\n  return {\n    dotsStart,\n    dotsEnd,\n    items,\n  };\n};\n\ntype LastFunctionResponse = PageItem[];\n\ninterface LastFunctionParams {\n  pages: number;\n  activePage: number;\n}\n\ntype LastFunction = (params: LastFunctionParams) => LastFunctionResponse;\n\nexport const last: LastFunction = function (params) {\n  const { pages, activePage } = params;\n\n  const remainder = clamp(pages - 6, 0, 3);\n\n  return Array.from({ length: remainder }, (x, i) => {\n    const value = pages - (remainder - (i + 1));\n    return {\n      type: 'PageItem',\n      label: value.toString(),\n      value,\n      active: activePage === value,\n    };\n  });\n};\n\ninterface CreatePaginationFunctionResponse {\n  items: (PageItem | DotsItem)[];\n}\n\ninterface CreatePaginationFunctionParams {\n  pages: number;\n  activePage: number;\n}\n\ntype CreatePaginationFunction = (params: CreatePaginationFunctionParams) => CreatePaginationFunctionResponse;\n\nexport const createPagination: CreatePaginationFunction = function (params) {\n  const { pages, activePage } = params;\n\n  const f = first({ pages, activePage });\n  const m = middle({ pages, activePage });\n  const l = last({ pages, activePage });\n\n  const result: CreatePaginationFunctionResponse = {\n    items: [],\n  };\n\n  result.items.push(...f);\n  result.items.push(m.dotsStart);\n  result.items.push(...m.items);\n  result.items.push(m.dotsEnd);\n  result.items.push(...l);\n\n  return result;\n};\n","import React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useIntl } from 'react-intl';\nimport { Dots, Grid, NextLink, PageLink, Pagination, PreviousLink } from '@strapi/design-system';\n\nimport { appendQueryParameter } from '../../utils/url';\nimport { getTranslation } from '../../utils/getTranslation';\nimport { createPagination } from './utils';\n\ninterface Props {\n  page?: number;\n  pages?: number;\n}\n\nconst ListPagination = (props: Props) => {\n  const { page, pages } = props;\n\n  const navigate = useNavigate();\n  const { formatMessage } = useIntl();\n\n  const prevIntl = {\n    id: getTranslation('ListPagination.previous-page'),\n    defaultMessage: 'Previous page',\n  };\n\n  const nextIntl = {\n    id: getTranslation('ListPagination.next-page'),\n    defaultMessage: 'Next page',\n  };\n\n  const gotoIntl = {\n    id: getTranslation('ListPagination.goto-page-n'),\n    defaultMessage: 'Go to page {pageNumber}',\n  };\n\n  const dotsIntl = {\n    id: getTranslation('ListPagination.dots'),\n    defaultMessage: 'And {more} other pages',\n  };\n\n  if (page === undefined || pages === undefined) return null;\n\n  const { location } = window;\n\n  const handleOnChangePage = (page: number) => {\n    const loc = appendQueryParameter(location, { page: page.toString() });\n\n    navigate(`?${loc.search}`);\n  };\n\n  return (\n    <Grid.Root>\n      <Grid.Item>\n        <Pagination activePage={page} pageCount={pages}>\n          <PreviousLink onClick={() => handleOnChangePage(page - 1)}>{formatMessage(prevIntl)}</PreviousLink>\n          <NextLink onClick={() => handleOnChangePage(page + 1)}>{formatMessage(nextIntl)}</NextLink>\n          {createPagination({ activePage: page, pages }).items.map((item) => {\n            if (item.type === 'PageItem') {\n              return (\n                <PageLink key={item.value} number={item.value} onClick={() => handleOnChangePage(item.value)}>\n                  {formatMessage(gotoIntl, { pageNumber: item.label })}\n                </PageLink>\n              );\n            } else if (item.type === 'DotsItem' && item.display) {\n              return <Dots key={`dots-${item.value}`}>{formatMessage(dotsIntl, { more: item.additional })}</Dots>;\n            }\n          })}\n        </Pagination>\n      </Grid.Item>\n    </Grid.Root>\n  );\n};\n\nexport default ListPagination;\n","export enum SearchField {\n  BY_ASSET_ID = 'by_asset_id',\n  BY_TITLE = 'by_title',\n}\n\nexport interface SearchVector {\n  field: SearchField;\n  value: any;\n}\n\nexport interface SortVector {\n  field: string;\n  desc: boolean;\n}\n","import type Mux from '@mux/mux-node';\nimport { z } from 'zod';\nimport { getService } from '.';\nimport { ParsedCustomTextTrack, StoredTextTrack, TextTrackFile } from '../../../types/shared-types';\nimport { MuxAsset, MuxAssetUpdate } from '../content-types/mux-asset/types';\nimport { TEXT_TRACK_MODEL } from './types';\n\nconst pluginId = 'mux-video-uploader';\n\nexport async function storeTextTracks(custom_text_tracks: ParsedCustomTextTrack[]): Promise<StoredTextTrack[]> {\n  // @ts-expect-error - v5 migration\n  return await Promise.all(\n    custom_text_tracks.map(async (track) => {\n      const { id } = await strapi.entityService.create(TEXT_TRACK_MODEL, { data: track });\n\n      return { ...track, id };\n    })\n  );\n}\n\n// TODO - This export is used in a shared types file which is also referenced in admin.\n// Because of this, the BACKEND_URI doesn't ref correctly :-\\\nexport function storedTextTrackToMuxTrack(track: StoredTextTrack): Mux.Video.AssetCreateTrackParams {\n  return {\n    type: 'text',\n    text_type: 'subtitles',\n    closed_captions: track.closed_captions,\n    language_code: track.language_code,\n    name: track.closed_captions ? `${track.name} (CC)` : track.name,\n    url: getStrapiTextTrackUrl(track.id),\n  };\n}\n\nconst BACKEND_URI = strapi.config?.server.url;\n\nfunction getStrapiTextTrackUrl(id: StoredTextTrack['id']) {\n  return `${BACKEND_URI}/${pluginId}/mux-text-tracks/${id}`;\n}\n\nexport function getMuxTextTrackUrl({\n  playback_id,\n  track,\n  signedToken,\n}: {\n  playback_id: MuxAsset['playback_id'];\n  track: Pick<Mux.Video.Track, 'id'>;\n  signedToken?: string;\n}) {\n  return `https://stream.mux.com/${playback_id}/text/${track.id}.vtt${signedToken ? `?token=${signedToken}` : ''}`;\n}\n\n/**\n * Deletes, creates or updates (deleting & recreating) modified subtitles & captions.\n * Doesn't modify the `mux-asset`'s `asset_data` in the Strapi database (that's handled by Mux's webhook handlers).\n */\nexport async function updateTextTracks(\n  muxAsset: MuxAsset,\n  newTracks: MuxAssetUpdate['custom_text_tracks']\n): Promise<MuxAsset['asset_data'] | undefined> {\n  if (!newTracks || !muxAsset.asset_id || !muxAsset.playback_id) return undefined;\n\n  const { asset_id, playback_id } = muxAsset;\n\n  const { token } = await (async () => {\n    if (!muxAsset.signed) return { token: undefined };\n\n    return getService('mux').signPlaybackId(playback_id, 'video');\n  })();\n\n  /**\n   * #1 PARSE EXISTING, REMOVED, ADDED AND UPDATED TRACKS\n   */\n  const existingTracks = muxAsset.asset_data?.tracks || [];\n\n  const removedTracks =\n    existingTracks.filter(\n      (track) =>\n        track.type === 'text' &&\n        track.text_type === 'subtitles' &&\n        !newTracks.find((t) => t.stored_track?.id === track.id)\n    ) || [];\n\n  const addedTracks = newTracks.filter((track) => !existingTracks.find((t) => t.id === track.stored_track?.id));\n\n  const updatedTracks = newTracks.flatMap((track) => {\n    const existingTrack = existingTracks.find(\n      (t) => t.id === track.stored_track?.id && t.type === 'text' && t.text_type === 'subtitles'\n    );\n\n    if (!existingTrack) return [];\n\n    const isDifferent = [\n      existingTrack.language_code !== track.language_code,\n      existingTrack.name !== track.name,\n      // Ignore closed_captions for generated captions/subtitles\n      existingTrack.text_source !== 'generated_vod' && existingTrack.closed_captions !== track.closed_captions,\n      track.file?.contents,\n    ].some(Boolean);\n\n    if (!isDifferent) return [];\n\n    return {\n      track,\n      prevId: existingTrack.id,\n    };\n  });\n\n  /**\n   * #2 DOWNLOAD FILES FOR TRACKS ALREADY IN MUX\n   *\n   * For tracks that were updated but didn't include a new user-sent file,\n   * we can't point to a stored track in Strapi. Instead, we need to point to the\n   * track hosted in Mux itself.\n   **/\n  const alreadyInMuxWithoutFile = await Promise.all(\n    updatedTracks.flatMap((t) => {\n      const track_id = t.track.stored_track?.id;\n      // If not a stored track, ignore\n      if (t.track.file || !track_id) return [];\n\n      return new Promise<(typeof updatedTracks)[number]>(async (resolve, reject) => {\n        try {\n          const muxTrackRes = await fetch(\n            getMuxTextTrackUrl({ playback_id, track: { id: track_id }, signedToken: token })\n          );\n\n          if (muxTrackRes.status !== 200) throw new Error(muxTrackRes.statusText);\n\n          const contents = await muxTrackRes.text();\n          const type = muxTrackRes.headers.get('content-type') || 'text/vtt';\n\n          const contentLength = muxTrackRes.headers.get('content-length');\n\n          const file = TextTrackFile.parse({\n            contents,\n            type,\n            name: t.track.name,\n            size: contentLength && !Number.isNaN(Number(contentLength)) ? Number(contentLength) : contents.length,\n          } as z.input<typeof TextTrackFile>);\n\n          resolve({\n            ...t,\n            track: {\n              ...t.track,\n              file,\n            },\n          });\n        } catch (error) {\n          reject(error);\n        }\n      });\n    })\n  );\n\n  /**\n   * #3 STORE TRACKS IN STRAPI\n   *\n   * So Mux's services can fetch them via URL\n   */\n  const newStoredForDownload = await (async () => {\n    try {\n      return await storeTextTracks(\n        [...addedTracks, ...updatedTracks.map((t) => t.track), ...alreadyInMuxWithoutFile.map((t) => t.track)].filter(\n          (t) => t.file\n        ) as ParsedCustomTextTrack[]\n      );\n    } catch (error) {\n      console.error('\\n\\n[updateTextTracks / storeTextTracks]', error);\n      throw new Error('Unable to store text tracks');\n    }\n  })();\n\n  /**\n   * #4 DELETE EXISTING TRACKS IN MUX\n   *\n   * Although creating the new ones first would yield a better safety net,\n   * we delete first because Mux doesn't allow tracks with duplicate language codes.\n   */\n  await (async () => {\n    try {\n      await getService('mux').deleteAssetTextTracks(asset_id, [\n        ...removedTracks.flatMap((t) => t.id || []),\n        ...updatedTracks.flatMap((t) => t.prevId || []),\n      ]);\n    } catch (error) {\n      console.error('\\n\\n[updateTextTracks / deleteAssetTextTracks]', error);\n      throw new Error('Unable to delete text tracks in Mux');\n    }\n  })();\n\n  /**\n   * #5 CREATE TRACKS IN MUX\n   *\n   * Provide an URL so Mux's services can fetch them remotely.\n   */\n  await (async () => {\n    try {\n      await getService('mux').createAssetTextTracks(asset_id, newStoredForDownload.map(storedTextTrackToMuxTrack));\n    } catch (error) {\n      console.error('\\n\\n[updateTextTracks / createAssetTextTracks]', error);\n      throw new Error('Unable to create text tracks in Mux');\n    }\n  })();\n}\n","import type Mux from '@mux/mux-node';\nimport { z } from 'zod';\nimport { storedTextTrackToMuxTrack } from '../server/src/utils/text-tracks';\n\nexport const SUPPORTED_MUX_LANGUAGES = [\n  { label: 'English', code: 'en', state: 'Stable' },\n  { label: 'Spanish', code: 'es', state: 'Stable' },\n  { label: 'Italian', code: 'it', state: 'Stable' },\n  { label: 'Portuguese', code: 'pt', state: 'Stable' },\n  { label: 'German', code: 'de', state: 'Stable' },\n  { label: 'French', code: 'fr', state: 'Stable' },\n  { label: 'Polish', code: 'pl', state: 'Beta' },\n  { label: 'Russian', code: 'ru', state: 'Beta' },\n  { label: 'Dutch', code: 'nl', state: 'Beta' },\n  { label: 'Catalan', code: 'ca', state: 'Beta' },\n  { label: 'Turkish', code: 'tr', state: 'Beta' },\n  { label: 'Swedish', code: 'sv', state: 'Beta' },\n  { label: 'Ukrainian', code: 'uk', state: 'Beta' },\n  { label: 'Norwegian', code: 'no', state: 'Beta' },\n  { label: 'Finnish', code: 'fi', state: 'Beta' },\n  { label: 'Slovak', code: 'sk', state: 'Beta' },\n  { label: 'Greek', code: 'el', state: 'Beta' },\n  { label: 'Czech', code: 'cs', state: 'Beta' },\n  { label: 'Croatian', code: 'hr', state: 'Beta' },\n  { label: 'Danish', code: 'da', state: 'Beta' },\n  { label: 'Romanian', code: 'ro', state: 'Beta' },\n  { label: 'Bulgarian', code: 'bg', state: 'Beta' },\n] as const;\n\nconst SUPPORTED_MUX_LANGUAGES_VALUES = SUPPORTED_MUX_LANGUAGES.map((l) => l.code);\n\nexport type SupportedMuxLanguage = (typeof SUPPORTED_MUX_LANGUAGES_VALUES)[number];\n\n/** .srt or .vtt file uploaded as subtitle/caption for a video */\nexport const TextTrackFile = z.object({\n  contents: z.string(),\n  type: z.string(),\n  name: z.string(),\n  size: z.number(),\n});\n\n/** Subtitles and captions uploaded by the user */\nexport const CustomTextTrack = z.object({\n  file: TextTrackFile,\n  name: z.string(),\n  language_code: z.string(),\n  closed_captions: z.boolean().default(false),\n  stored_track: z.custom<Mux.Video.Track>((value) => typeof value === 'object' && value && 'id' in value).optional(),\n});\n\nexport type ParsedCustomTextTrack = z.infer<typeof CustomTextTrack>;\n\nexport type StoredTextTrack = ParsedCustomTextTrack & { id: string };\n\nexport const UploadConfig = z\n  .object({\n    /**\n     * Enable static renditions by setting this to 'standard'. Can be overwritten on a per-asset basis.\n     * @see {@link https://docs.mux.com/guides/video/enable-static-mp4-renditions#why-enable-mp4-support}\n     * @defaultValue 'none'\n     */\n    mp4_support: z.enum(['none', 'standard']).default('none'),\n\n    /**\n     * Max resolution tier can be used to control the maximum resolution_tier your asset is encoded, stored, and streamed at.\n     * @see {@link https://docs.mux.com/guides/stream-videos-in-4k}\n     * @defaultValue '1080p'\n     */\n    max_resolution_tier: z.enum(['2160p', '1440p', '1080p']).default('1080p'),\n\n    /**\n     * The video quality informs the cost, quality, and available platform features for the asset.\n     * @see {@link https://docs.mux.com/guides/use-video-quality-levels}\n     * @defaultValue 'plus'\n     */\n    video_quality: z.enum(['basic', 'plus']).default('plus'),\n\n    /**\n     * Whether or not to use signed URLs, making the asset private\n     * @see {@link https://docs.mux.com/guides/use-encoding-tiers}\n     * @defaultValue 'false'\n     */\n    signed: z.boolean().default(false),\n\n    autogenerated_captions_languages: z\n      .array(\n        z.object({\n          code: z.enum(SUPPORTED_MUX_LANGUAGES_VALUES as [SupportedMuxLanguage, ...SupportedMuxLanguage[]]),\n          isSourceLanguage: z.boolean().default(false),\n        })\n      )\n      .optional(),\n\n    custom_text_tracks: z.array(CustomTextTrack).optional(),\n\n    upload_type: z.enum(['file', 'url']).default('file'),\n  })\n  .transform((v) => {\n    if (v.video_quality === 'basic') {\n      return {\n        ...v,\n        max_resolution_tier: '1080p',\n        mp4_support: 'none',\n      } as typeof v;\n    }\n\n    return v;\n  });\n\nexport type RequestedUploadConfig = z.input<typeof UploadConfig>;\nexport type ParsedUploadConfig = z.infer<typeof UploadConfig>;\n\nexport const UploadData = z\n  .object({ title: z.string().min(1) })\n  .and(\n    z.discriminatedUnion('upload_type', [\n      z.object({ upload_type: z.literal('file'), file: z.custom<File>((value) => value instanceof File) }),\n      z.object({ upload_type: z.literal('url'), url: z.string().url() }),\n    ])\n  )\n  .and(UploadConfig);\n\nexport type RequestedUploadData = z.input<typeof UploadData>;\n\n/**\n * Used by `server/controllers/mux.ts` as that doesn't receive the file from the front-end.\n * Users upload the file directly from the browser via the presigned URL generated in `parseUploadRequest`.\n */\nexport const UploadDataWithoutFile = z\n  .object({ title: z.string().min(1) })\n  .and(\n    z.discriminatedUnion('upload_type', [\n      z.object({ upload_type: z.literal('file') }),\n      z.object({ upload_type: z.literal('url'), url: z.string().url() }),\n    ])\n  )\n  .and(UploadConfig);\n\nexport function uploadConfigToNewAssetInput(\n  config: ParsedUploadConfig,\n  storedTextTracks: StoredTextTrack[] = [],\n  url?: string\n): Mux.Video.Assets.AssetCreateParams.Input[] | undefined {\n  const inputs: Mux.Video.Assets.AssetCreateParams.Input[] = [];\n\n  const base: Mux.Video.Assets.AssetCreateParams.Input = {};\n\n  if (config.upload_type === 'url') {\n    base.url = url;\n  }\n\n  if (config.autogenerated_captions_languages) {\n    base.generated_subtitles = config.autogenerated_captions_languages.map((language) => {\n      const label = SUPPORTED_MUX_LANGUAGES.find((l) => l.code === language.code)?.label || language.code;\n      return {\n        language_code: language.code,\n        name: language.isSourceLanguage ? `${label} (CC)` : label,\n        type: 'text',\n        text_type: 'subtitles',\n        closed_captions: true,\n      };\n    });\n  }\n\n  if (Object.keys(base).length > 0) {\n    inputs.push(base);\n  }\n\n  if (storedTextTracks.length > 0) {\n    inputs.push(...storedTextTracks.map(storedTextTrackToMuxTrack));\n  }\n\n  return inputs.length > 0 ? inputs : undefined;\n}\n","import { IntlShape, useIntl } from 'react-intl';\n\nimport { PLUGIN_ID } from '../pluginId';\nimport type translations from '../translations/en.json';\n\nconst getTrad = (id: string) => `${PLUGIN_ID}.${id}`;\n\nexport type TranslationKey = keyof typeof translations;\nexport type FormatMessage = (id: string, defaultMessage?: string) => string;\n\ninterface UsePluginIntlReturnType extends Omit<IntlShape, 'formatMessage'> {\n  formatMessage: FormatMessage;\n}\n\ntype UsePluginIntlFunction = () => UsePluginIntlReturnType;\n\nconst usePluginIntl: UsePluginIntlFunction = () => {\n  const intl = useIntl();\n\n  const formatMessage = (id: string, defaultMessage?: string) =>\n    intl.formatMessage({\n      id: getTrad(id),\n      defaultMessage,\n    });\n\n  return {\n    ...intl,\n    formatMessage,\n  };\n};\n\nexport default usePluginIntl;\n","import React from 'react';\nimport { Field } from '@strapi/design-system';\n\ninterface Props {\n  error?: string;\n  label?: string;\n  name: string;\n  required?: boolean;\n  onFiles: (files: File[]) => void;\n  inputProps?: React.InputHTMLAttributes<HTMLInputElement>;\n}\n\nexport const FileInput = (props: Props) => {\n  const { name, label = undefined, error = undefined, required = false, onFiles = () => {} } = props;\n  const handleOnChange = (e: any) => onFiles(e.target.files);\n\n  return (\n    <div>\n      <Field.Root name={name} error={error}>\n        <Field.Label aria-required>{label}</Field.Label>\n        <Field.Input type=\"file\" onChange={handleOnChange} />\n        <Field.Error />\n      </Field.Root>\n    </div>\n  );\n};\n\nFileInput.displayName = 'FileInput';\n","import {\n  Box,\n  Button,\n  Card,\n  CardBody,\n  CardContent,\n  Checkbox,\n  Combobox,\n  ComboboxOption,\n  Field,\n  Grid,\n  IconButton,\n  Typography,\n} from '@strapi/design-system';\nimport { Download, Pencil, Plus, Trash } from '@strapi/icons';\nimport LanguagesList, { LanguageCode } from 'iso-639-1';\nimport React, { ChangeEvent } from 'react';\nimport { useIntl } from 'react-intl';\nimport type { MuxAsset } from '../../../../server/src/content-types/mux-asset/types';\nimport { getMuxTextTrackUrl } from '../../../../server/src/utils/text-tracks';\nimport { ParsedCustomTextTrack, TextTrackFile } from '../../../../types/shared-types';\nimport { getTranslation } from '../../utils/getTranslation';\nimport { FileInput } from '../file-input';\nimport { useSignedTokens } from '../signed-tokens-provider';\n\nfunction TrackForm({\n  track,\n  modifyTrack,\n  deleteTrack,\n  muxAsset,\n}: {\n  track: Partial<ParsedCustomTextTrack>;\n  modifyTrack: (newValues: Partial<ParsedCustomTextTrack>) => void;\n  deleteTrack: () => void;\n  muxAsset?: MuxAsset;\n}) {\n  const { video } = useSignedTokens();\n  const [editable, setEditable] = React.useState(track.stored_track?.id ? false : true);\n  const { formatMessage } = useIntl();\n\n  async function handleFiles(files: File[]) {\n    const parsed = await fileToTrackFile(files[0]);\n    if (!parsed.success) {\n      modifyTrack({ file: undefined });\n      return;\n    }\n\n    modifyTrack({ file: parsed.data });\n  }\n\n  async function downloadOnClick(e: React.MouseEvent<HTMLButtonElement, MouseEvent>) {\n    e.preventDefault();\n    if (!muxAsset?.playback_id || !track.stored_track) return;\n\n    const token = await video(muxAsset);\n\n    const trackUrl = getMuxTextTrackUrl({\n      playback_id: muxAsset.playback_id,\n      track: track.stored_track,\n      signedToken: token || undefined,\n    });\n\n    const anchor = document.createElement('a');\n    anchor.setAttribute('href', trackUrl);\n    anchor.setAttribute('download', 'true');\n    anchor.click();\n  }\n\n  return (\n    <Card width=\"100%\">\n      <CardBody>\n        <CardContent width=\"100%\">\n          <Grid.Root width=\"100%\" gap={4}>\n            <Grid.Item col={12} s={12}>\n              <Box grow={1}>\n                <Field.Root\n                  hint={formatMessage({\n                    id: getTranslation('CustomTextTrackForm.language'),\n                    defaultMessage: 'Language',\n                  })}\n                >\n                  <Field.Label>\n                    {formatMessage({\n                      id: getTranslation('CustomTextTrackForm.language'),\n                      defaultMessage: 'Language',\n                    })}\n                  </Field.Label>\n                  <Combobox\n                    value={track.language_code}\n                    onChange={(newValue: LanguageCode) => {\n                      modifyTrack({ language_code: newValue, name: LanguagesList.getNativeName(newValue) });\n                    }}\n                    required\n                    disabled={!editable}\n                  >\n                    {LanguagesList.getAllCodes().map((code) => (\n                      <ComboboxOption key={code} value={code}>\n                        {LanguagesList.getNativeName(code)}\n                      </ComboboxOption>\n                    ))}\n                  </Combobox>\n                  <Field.Error />\n                </Field.Root>\n              </Box>\n              {track.stored_track?.id && muxAsset?.playback_id && (\n                <Box marginLeft={4}>\n                  <Field.Root>\n                    <Field.Label>&nbsp;</Field.Label>\n                    <IconButton\n                      label={formatMessage({\n                        id: getTranslation('Common.download-button'),\n                        defaultMessage: 'Download',\n                      })}\n                      withTooltip={false}\n                      onClick={downloadOnClick}\n                    >\n                      <Download />\n                    </IconButton>\n                  </Field.Root>\n                </Box>\n              )}\n            </Grid.Item>\n            <Grid.Item col={12} s={12}>\n              {editable && (\n                <Box marginRight={4}>\n                  <FileInput\n                    name=\"file\"\n                    label={formatMessage({\n                      id: getTranslation('Common.file-label'),\n                      defaultMessage: 'Subtitles file (.vtt or .srt)',\n                    })}\n                    required\n                    onFiles={handleFiles}\n                    inputProps={{\n                      accept: '.vtt,.srt',\n                    }}\n                  />\n                </Box>\n              )}\n              <Box>\n                <Field.Root>\n                  <Field.Label>{editable ? '\\u00A0' : null}</Field.Label>\n                  <Checkbox\n                    value={track.closed_captions ? 1 : 0}\n                    onChange={(e: any) => {\n                      modifyTrack({ closed_captions: e.currentTarget.value === 1 ? true : false });\n                    }}\n                    disabled={!editable}\n                  >\n                    <Typography style={{ whiteSpace: 'nowrap' }}>\n                      {formatMessage({\n                        id: getTranslation('CustomTextTrackForm.closed-captions'),\n                        defaultMessage: 'Closed captions',\n                      })}\n                    </Typography>\n                  </Checkbox>\n                </Field.Root>\n              </Box>\n            </Grid.Item>\n            <Grid.Item>\n              <Box marginRight={4}>\n                <Button startIcon={<Trash />} onClick={deleteTrack} variant=\"danger-light\">\n                  {formatMessage({\n                    id: getTranslation('Common.delete-button'),\n                    defaultMessage: 'Delete',\n                  })}\n                </Button>\n              </Box>\n              <Box marginRight={4}>\n                {!editable && (\n                  <Button onClick={() => setEditable(true)} startIcon={<Pencil />}>\n                    {formatMessage({\n                      id: getTranslation('Common.update-button'),\n                      defaultMessage: 'Update',\n                    })}\n                  </Button>\n                )}\n              </Box>\n            </Grid.Item>\n          </Grid.Root>\n        </CardContent>\n      </CardBody>\n    </Card>\n  );\n}\n\nexport default function CustomTextTrackForm({\n  custom_text_tracks,\n  modifyCustomTextTracks,\n  muxAsset,\n}: {\n  custom_text_tracks: Partial<ParsedCustomTextTrack>[];\n  modifyCustomTextTracks: (newValues: Partial<ParsedCustomTextTrack>[]) => void;\n  muxAsset?: MuxAsset;\n}) {\n  const { formatMessage } = useIntl();\n\n  function handleNew() {\n    modifyCustomTextTracks([\n      ...(custom_text_tracks || []),\n      {\n        file: undefined,\n        language_code: '',\n        name: '',\n        closed_captions: false,\n      } as any as ParsedCustomTextTrack,\n    ]);\n  }\n\n  function modifyTrack(index: number) {\n    return (newValues: Partial<ParsedCustomTextTrack>) => {\n      modifyCustomTextTracks(\n        custom_text_tracks?.map((track, i) => {\n          if (i === index) {\n            return {\n              ...track,\n              ...newValues,\n            };\n          }\n          return track;\n        }) || [newValues]\n      );\n    };\n  }\n\n  function deleteTrack(index: number) {\n    return () => {\n      modifyCustomTextTracks(custom_text_tracks?.filter((_, i) => i !== index) || []);\n    };\n  }\n\n  return (\n    <Grid.Root gap={2}>\n      {custom_text_tracks?.map((track, index) => (\n        <Grid.Item key={index} col={12} s={12}>\n          <TrackForm\n            key={track.stored_track?.id || `${index}-${track.language_code}`}\n            track={track}\n            modifyTrack={modifyTrack(index)}\n            deleteTrack={deleteTrack(index)}\n            muxAsset={muxAsset}\n          />\n        </Grid.Item>\n      ))}\n      <Grid.Item col={12} s={12}>\n        <Button type=\"button\" startIcon={<Plus />} onClick={handleNew} style={{ justifyContent: 'center' }}>\n          {formatMessage({\n            id: getTranslation('CustomTextTrackForm.new-caption'),\n            defaultMessage: 'New caption/subtitle',\n          })}\n        </Button>\n      </Grid.Item>\n    </Grid.Root>\n  );\n}\n\nfunction getFileTextContents(file: File) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n\n    reader.onload = () => {\n      resolve(reader.result);\n    };\n\n    reader.onerror = reject;\n\n    reader.readAsText(file);\n  });\n}\n\nasync function fileToTrackFile(file: File) {\n  return TextTrackFile.safeParse({\n    name: file.name,\n    size: file.size,\n    type: file.type,\n    contents: await getFileTextContents(file),\n  });\n}\n","import { FormikErrors } from 'formik';\n\nimport {\n  RequestedUploadConfig,\n  UploadConfig,\n  UploadData,\n  type RequestedUploadData,\n} from '../../../../types/shared-types';\nimport type { FormatMessage, TranslationKey } from '../../utils/use-plugin-intl';\n\nexport const NEW_UPLOAD_INITIAL_VALUES: RequestedUploadData = {\n  ...UploadConfig.parse({} as RequestedUploadConfig),\n  title: '',\n  upload_type: 'file',\n  // @ts-expect-error initialize the form without a file. It'll be properly validated before submission\n  file: undefined,\n};\n\nexport const generateUploadInfo = ({\n  body,\n  formatMessage,\n}: {\n  body: Partial<RequestedUploadData>;\n  formatMessage: FormatMessage;\n}): RequestedUploadData => {\n  const errors: FormikErrors<RequestedUploadData> = {};\n  const parsed = UploadData.safeParse(body);\n\n  if (parsed.success) return parsed.data;\n\n  parsed.error.issues.forEach((issue) => {\n    const issuePath = (Array.isArray(issue.path) ? issue.path.join('.') : issue.path) as keyof typeof errors;\n    errors[issuePath] = formatMessage(`ModalNewUpload.formErrors.${issuePath}` as TranslationKey, issue.message);\n  });\n  throw errors;\n};\n","import React from 'react';\nimport { useIntl } from 'react-intl';\nimport { WarningCircle } from '@strapi/icons';\nimport { Box, Flex, Link, Typography } from '@strapi/design-system';\n\nimport { getTranslation } from '../../utils/getTranslation';\n\ninterface Props {\n  message: string;\n}\n\nconst UploadError = (props: Props) => {\n  const { message } = props;\n\n  const { formatMessage } = useIntl();\n\n  return (\n    <>\n      <Box paddingTop={5}>\n        <Flex justifyContent=\"center\">\n          <Typography variant=\"alpha\">\n            {formatMessage({\n              id: getTranslation('UploadError.upload-error'),\n              defaultMessage: 'Upload Error',\n            })}\n            &nbsp;\n            <WarningCircle color=\"danger600\" />\n          </Typography>\n        </Flex>\n      </Box>\n      <Box paddingTop={5}>\n        <Typography variant=\"omega\">\n          {formatMessage({\n            id: getTranslation('UploadError.message'),\n            defaultMessage:\n              'An error occurred while uploading the file.  Submit an issue with the following error message',\n          })}\n          &nbsp;-&nbsp;\n          <Link isExternal href=\"https://github.com/muxinc/strapi-plugin-mux-video-uploader/issues\">\n            {formatMessage({\n              id: getTranslation('UploadError.issues'),\n              defaultMessage: 'File issue',\n            })}\n          </Link>\n        </Typography>\n      </Box>\n      <Box paddingTop={5}>\n        <Typography variant=\"omega\" textColor=\"danger500\">\n          {message}\n        </Typography>\n      </Box>\n    </>\n  );\n};\n\nexport default UploadError;\n","import React from 'react';\nimport { useIntl } from 'react-intl';\nimport { Box, Typography } from '@strapi/design-system';\n\nimport { getTranslation } from '../../utils/getTranslation';\n\nconst Uploaded = () => {\n  const { formatMessage } = useIntl();\n\n  return (\n    <>\n      <Box paddingTop={2}>\n        <Typography variant=\"delta\">\n          {formatMessage({\n            id: getTranslation('Uploaded.upload-complete'),\n            defaultMessage: 'Video uploaded successfully',\n          })}\n        </Typography>\n      </Box>\n      <Box paddingTop={5}>\n        <Typography variant=\"omega\">\n          {formatMessage({\n            id: getTranslation('Uploaded.message'),\n            defaultMessage:\n              'The file has been successfully uploaded to Mux and is now able to be referenced by other Content Types within Strapi.',\n          })}\n        </Typography>\n      </Box>\n    </>\n  );\n};\n\nexport default Uploaded;\n","import React from 'react';\nimport { useIntl } from 'react-intl';\nimport styled from 'styled-components';\nimport { Box, Flex, ProgressBar, Typography } from '@strapi/design-system';\n\nimport { getTranslation } from '../../utils/getTranslation';\n\nconst ProgressBarWrapper = styled.div`\n  width: 60%;\n`;\n\nconst ProgessBarUnleased = styled(ProgressBar)`\n  width: 100%;\n`;\n\ninterface Props {\n  percent: number;\n}\n\nconst Uploading = (props: Props) => {\n  const { formatMessage } = useIntl();\n\n  return (\n    <>\n      <Box paddingBottom={5}>\n        <Flex justifyContent=\"center\">\n          <Typography variant=\"alpha\">\n            {formatMessage({\n              id: getTranslation('Uploading.uploading'),\n              defaultMessage: 'Uploading to Mux',\n            })}\n          </Typography>\n        </Flex>\n      </Box>\n      <Box paddingBottom={5}>\n        <Flex justifyContent=\"center\">\n          <ProgressBarWrapper>\n            <ProgessBarUnleased value={props.percent} />\n          </ProgressBarWrapper>\n        </Flex>\n      </Box>\n    </>\n  );\n};\n\nexport default Uploading;\n","import React from 'react';\nimport { createUpload, UpChunk } from '@mux/upchunk';\nimport { useFetchClient } from '@strapi/strapi/admin';\nimport {\n  Accordion,\n  Badge,\n  Box,\n  Button,\n  Field,\n  Flex,\n  Grid,\n  Modal,\n  MultiSelect,\n  MultiSelectOption,\n  Radio,\n  Tabs,\n  TextInput,\n  Toggle,\n} from '@strapi/design-system';\nimport { Plus } from '@strapi/icons';\nimport { FormikErrors, FormikHelpers, useFormik } from 'formik';\nimport { useIntl } from 'react-intl';\n\nimport { SUPPORTED_MUX_LANGUAGES, type RequestedUploadData } from '../../../../types/shared-types';\nimport { getTranslation } from '../../utils/getTranslation';\nimport usePluginIntl from '../../utils/use-plugin-intl';\nimport { FileInput } from '../file-input';\nimport CustomTextTrackForm from './custom-text-track-form';\nimport { generateUploadInfo, NEW_UPLOAD_INITIAL_VALUES } from './new-upload';\nimport UploadError from './upload-error';\nimport Uploaded from './uploaded';\nimport Uploading from './uploading';\nimport { PLUGIN_ID } from '../../pluginId';\n\nconst ModalNewUpload = ({ isOpen, onToggle = () => {} }: { isOpen: boolean; onToggle: (refresh: boolean) => void }) => {\n  const [uploadPercent, setUploadPercent] = React.useState<number>();\n  const [isComplete, setIsComplete] = React.useState<boolean>(false);\n  const [uploadError, setUploadError] = React.useState<string>();\n\n  const uploadRef = React.useRef<UpChunk | undefined>();\n\n  const { post } = useFetchClient();\n  const { formatMessage } = usePluginIntl();\n\n  const uploadFile = (endpoint: string, file: File) => {\n    setUploadPercent(0);\n\n    uploadRef.current = createUpload({ endpoint, file });\n    uploadRef.current.on('error', (err) => setUploadError(err.detail));\n    uploadRef.current.on('progress', (progressEvt) => {\n      if (isComplete) return;\n      setUploadPercent(Math.floor(progressEvt.detail));\n    });\n    uploadRef.current.on('success', () => {\n      setIsComplete(true);\n      setUploadPercent(undefined);\n    });\n  };\n\n  const handleOnSubmit = async (\n    body: RequestedUploadData,\n    { resetForm, setErrors }: FormikHelpers<RequestedUploadData>\n  ) => {\n    let uploadInfo: RequestedUploadData;\n    try {\n      uploadInfo = generateUploadInfo({ body, formatMessage });\n    } catch (errors) {\n      setErrors(errors as FormikErrors<RequestedUploadData>);\n      return;\n    }\n\n    const url = `${PLUGIN_ID}/${uploadInfo.upload_type === 'url' ? 'remote-upload' : 'direct-upload'}`;\n\n    const result = await post(url, uploadInfo).catch((error) => {\n      console.log({ error });\n      switch (typeof error) {\n        case 'string': {\n          setUploadError(error);\n          break;\n        }\n        case 'object': {\n          setUploadError((error as Error).message);\n          break;\n        }\n        default: {\n          setUploadError(formatMessage('ModalNewUpload.unknown-error', 'Unknown error encountered'));\n\n          break;\n        }\n      }\n\n      return undefined;\n    });\n\n    if (!result) return;\n\n    const { status, data } = result;\n\n    if ((status && status !== 200) || data?.errors) {\n      return data?.errors;\n    } else if (uploadInfo.upload_type === 'file') {\n      if (!data.url) return setUploadError(formatMessage('ModalNewUpload.unknown-error', 'No upload URL returned'));\n\n      uploadFile(data.url, uploadInfo.file);\n    } else if (uploadInfo.upload_type === 'url') {\n      setUploadPercent(100);\n      setIsComplete(true);\n    } else {\n      console.log(formatMessage('ModalNewUpload.unresolvable-upload-state', 'Unable to resolve upload state'));\n    }\n\n    resetForm();\n  };\n\n  const handleOnModalClose = (forceRefresh: boolean = false) => {\n    onToggle(forceRefresh);\n    handleOnReset();\n  };\n\n  const handleOnAbort = () => {\n    uploadRef.current?.abort();\n    handleOnModalClose();\n  };\n\n  const handleOnModalFinish = () => handleOnModalClose(true);\n\n  const renderFooter = () => {\n    if (uploadError || isComplete) {\n      return (\n        <Modal.Footer>\n          <Button variant=\"secondary\" startIcon={<Plus />} onClick={handleOnReset}>\n            {formatMessage('Uploaded.upload-another-button', 'Upload another asset')}\n          </Button>\n          <Button onClick={handleOnModalFinish}>{formatMessage('Common.finish-button', 'Finish')}</Button>\n        </Modal.Footer>\n      );\n    }\n\n    if (uploadPercent !== undefined) {\n      return (\n        <Modal.Footer>\n          <Button onClick={handleOnAbort} variant=\"tertiary\">\n            {formatMessage('Common.cancel-button', 'Cancel')}\n          </Button>\n        </Modal.Footer>\n      );\n    }\n\n    return (\n      <Modal.Footer>\n        <Button onClick={() => handleOnModalClose()} variant=\"tertiary\">\n          {formatMessage('Common.cancel-button', 'Cancel')}\n        </Button>\n        <Button onClick={handleSubmit}>{formatMessage('Common.save-button', 'Save')}</Button>\n      </Modal.Footer>\n    );\n  };\n\n  const { values, errors, resetForm, setFieldValue, handleChange, handleSubmit } = useFormik({\n    initialValues: NEW_UPLOAD_INITIAL_VALUES,\n    enableReinitialize: true,\n    validateOnChange: false,\n    onSubmit: handleOnSubmit,\n  });\n\n  const handleOnReset = () => {\n    setUploadPercent(undefined);\n    setIsComplete(false);\n    setUploadError(undefined);\n    resetForm();\n  };\n\n  const handleOnOpenChange = (open: boolean) => {\n    if (open) return;\n\n    handleOnModalClose();\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <form>\n      <Modal.Root open={isOpen} onOpenChange={handleOnOpenChange}>\n        <Modal.Content>\n          <Modal.Header>\n            <Modal.Title>{formatMessage('ModalNewUpload.header', 'New upload')}</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n            <FormBody\n              errors={errors}\n              values={values}\n              setFieldValue={setFieldValue}\n              handleChange={handleChange}\n              isComplete={isComplete}\n              uploadError={uploadError}\n              uploadPercent={uploadPercent}\n            />\n          </Modal.Body>\n          {renderFooter()}\n        </Modal.Content>\n      </Modal.Root>\n    </form>\n  );\n};\n\nexport default ModalNewUpload;\n\nfunction FormBody(props: {\n  errors: FormikErrors<RequestedUploadData>;\n  values: RequestedUploadData;\n  setFieldValue: <Field extends keyof RequestedUploadData>(\n    field: Field,\n    value: RequestedUploadData[Field],\n    shouldValidate?: boolean | undefined\n  ) => void;\n  handleChange: (e: React.ChangeEvent<any>) => void;\n  uploadError?: string;\n  isComplete: boolean;\n  uploadPercent?: number;\n}) {\n  const { errors, values, setFieldValue, handleChange } = props;\n  const { formatMessage } = useIntl();\n\n  const handleAutogeneratedCaptionsLanguagesChange = (vals: string[]) => {\n    const languages: any[] = [];\n\n    vals.forEach((value) => {\n      const language = SUPPORTED_MUX_LANGUAGES.find((lang) => lang.code === value);\n\n      language && languages.push(language);\n    });\n\n    setFieldValue('autogenerated_captions_languages', languages);\n  };\n\n  if (props.uploadError) {\n    return <UploadError message={props.uploadError} />;\n  }\n\n  if (props.isComplete) {\n    return <Uploaded />;\n  }\n\n  if (props.uploadPercent !== undefined) {\n    return <Uploading percent={props.uploadPercent} />;\n  }\n\n  return (\n    <Box padding={1} background=\"neutral0\">\n      <FieldWrapper>\n        <Field.Root error={errors.title}>\n          <Field.Label>\n            {formatMessage({\n              id: getTranslation('Common.title-label'),\n              defaultMessage: 'Title',\n            })}\n          </Field.Label>\n          <TextInput\n            name=\"title\"\n            value={values.title}\n            hasError={errors.title !== undefined}\n            required\n            onChange={handleChange}\n          />\n          <Field.Error />\n          <Field.Hint />\n        </Field.Root>\n      </FieldWrapper>\n\n      <Field.Root>\n        <Field.Label>\n          {formatMessage({\n            id: getTranslation('Common.upload_type_label-label'),\n            defaultMessage: 'Upload via',\n          })}\n        </Field.Label>\n        <Tabs.Root id=\"upload_type\" defaultValue=\"file\" variant=\"simple\">\n          <Tabs.List aria-label=\"Manage your attribute\">\n            <Tabs.Trigger value=\"file\" onClick={() => setFieldValue('upload_type', 'file')}>\n              File\n            </Tabs.Trigger>\n            <Tabs.Trigger value=\"url\" onClick={() => setFieldValue('upload_type', 'url')}>\n              URL\n            </Tabs.Trigger>\n          </Tabs.List>\n          <Tabs.Content value=\"file\">\n            <FieldWrapper>\n              <FileInput\n                name=\"file\"\n                label={formatMessage({\n                  id: getTranslation('Common.file-label'),\n                  defaultMessage: 'File',\n                })}\n                inputProps={{\n                  accept: 'video/*,audio/*',\n                }}\n                // @ts-expect-error\n                error={'file' in errors ? errors.file : undefined}\n                required\n                onFiles={(files: File[]) =>\n                  setFieldValue(\n                    // @ts-expect-error\n                    'file',\n                    files[0]\n                  )\n                }\n              />\n            </FieldWrapper>\n          </Tabs.Content>\n          <Tabs.Content value=\"url\">\n            <FieldWrapper>\n              <Field.Root>\n                <Field.Label>\n                  {formatMessage({\n                    id: getTranslation('Common.url-label'),\n                    defaultMessage: 'Url',\n                  })}\n                </Field.Label>\n              </Field.Root>\n              <TextInput\n                name=\"url\"\n                value={'url' in values ? values.url : ''}\n                hasError={'url' in errors ? true : false}\n                required\n                onChange={handleChange}\n              />\n            </FieldWrapper>\n          </Tabs.Content>\n        </Tabs.Root>\n      </Field.Root>\n\n      <Accordion.Root>\n        <Accordion.Item value=\"acc-01\">\n          <Accordion.Header>\n            <Accordion.Trigger>\n              {formatMessage({\n                id: getTranslation('ModalNewUpload.section_encoding_settings-label'),\n                defaultMessage: 'Encoding settings',\n              })}\n            </Accordion.Trigger>\n          </Accordion.Header>\n          <Accordion.Content>\n            <Grid.Root gap={4}>\n              <Grid.Item col={6} s={12} direction=\"column\" alignItems=\"start\">\n                <Box padding={4} width=\"100%\">\n                  <Field.Root>\n                    <Field.Label>\n                      {formatMessage({\n                        id: getTranslation('Common.video_quality-label'),\n                        defaultMessage: 'Video quality',\n                      })}\n                    </Field.Label>\n                    <Radio.Group\n                      onValueChange={(value: any) => setFieldValue('video_quality', value)}\n                      value={values.video_quality}\n                    >\n                      <Radio.Item value=\"basic\">\n                        {formatMessage({\n                          id: getTranslation('Common.video_quality_basic-label'),\n                          defaultMessage: 'Basic',\n                        })}\n                      </Radio.Item>\n                      <Radio.Item value=\"plus\">\n                        {formatMessage({\n                          id: getTranslation('Common.video_quality_plus-label'),\n                          defaultMessage: 'Plus',\n                        })}\n                      </Radio.Item>\n                    </Radio.Group>\n                  </Field.Root>\n                </Box>\n              </Grid.Item>\n              <Grid.Item col={6} s={12} direction=\"column\" alignItems=\"start\">\n                <Box padding={4} width=\"100%\">\n                  <Field.Root>\n                    <Field.Label>\n                      {formatMessage({\n                        id: getTranslation('Common.max_resolution_tier-label'),\n                        defaultMessage: 'Maximum stream resolution',\n                      })}\n                    </Field.Label>\n                    <Radio.Group\n                      aria-labelledby=\"max_resolution_tier_label\"\n                      onValueChange={(value: any) => setFieldValue('max_resolution_tier', value)}\n                      value={values.max_resolution_tier}\n                      style={{ marginTop: '0.5rem' }}\n                      disabled={values.video_quality === 'basic'}\n                    >\n                      <Radio.Item value=\"2160p\">2160p (4k)</Radio.Item>\n                      <Radio.Item value=\"1440p\">1440p (2k)</Radio.Item>\n                      <Radio.Item value=\"1080p\">1080p</Radio.Item>\n                    </Radio.Group>\n                  </Field.Root>\n                </Box>\n              </Grid.Item>\n            </Grid.Root>\n          </Accordion.Content>\n        </Accordion.Item>\n        <Accordion.Item value=\"acc-02\">\n          <Accordion.Header>\n            <Accordion.Trigger>\n              {formatMessage({\n                id: getTranslation('ModalNewUpload.section_delivery_settings-label'),\n                defaultMessage: 'Delivery settings',\n              })}\n            </Accordion.Trigger>\n          </Accordion.Header>\n          <Accordion.Content>\n            <Grid.Root gap={4}>\n              <Grid.Item col={6} s={12} direction=\"column\" alignItems=\"start\">\n                <Box padding={4} width=\"100%\">\n                  <Field.Root>\n                    <Field.Label>\n                      {formatMessage({\n                        id: getTranslation('Common.signed-label'),\n                        defaultMessage: 'Signed Playback URL',\n                      })}\n                    </Field.Label>\n                    <Toggle\n                      name=\"Private\"\n                      value={values.signed ? 'on' : 'off'}\n                      onLabel=\"on\"\n                      offLabel=\"off\"\n                      checked={values.signed}\n                      onChange={(e: any) => {\n                        setFieldValue('signed', e.target.checked);\n                      }}\n                    />\n                  </Field.Root>\n                </Box>\n              </Grid.Item>\n              <Grid.Item col={6} s={12} direction=\"column\" alignItems=\"start\">\n                <Box padding={4} width=\"100%\">\n                  <Field.Root>\n                    <Field.Label>\n                      {formatMessage({\n                        id: getTranslation('Common.mp4_support-label'),\n                        defaultMessage: 'Allow downloading via MP4',\n                      })}\n                    </Field.Label>\n                    <Toggle\n                      name=\"mp4_support\"\n                      value={values.mp4_support}\n                      onLabel=\"on\"\n                      offLabel=\"off\"\n                      checked={values.mp4_support === 'standard'}\n                      disabled={values.video_quality === 'basic'}\n                      onChange={(e: any) => {\n                        setFieldValue(\n                          'mp4_support',\n                          (e.target.checked ? 'standard' : 'none') as typeof values.mp4_support\n                        );\n                      }}\n                    />\n                  </Field.Root>\n                </Box>\n              </Grid.Item>\n            </Grid.Root>\n          </Accordion.Content>\n        </Accordion.Item>\n        <Accordion.Item value=\"acc-03\">\n          <Accordion.Header>\n            <Accordion.Trigger>\n              {formatMessage({\n                id: getTranslation('ModalNewUpload.section_additional_settings-label'),\n                defaultMessage: 'Additional settings',\n              })}\n            </Accordion.Trigger>\n          </Accordion.Header>\n          <Accordion.Content>\n            <Box padding={4} width=\"100%\">\n              <Tabs.Root defaultValue=\"autogenerated\">\n                <Tabs.List aria-label=\"Manage your attribute\">\n                  <Tabs.Trigger value=\"autogenerated\">\n                    <Flex justifyContent=\"center\">\n                      <Box>\n                        {formatMessage({\n                          id: getTranslation('ModalNewUpload.tab_captions_autogenerated-label'),\n                          defaultMessage: 'Auto-generated',\n                        })}\n                      </Box>\n                      {values.autogenerated_captions_languages &&\n                        values.autogenerated_captions_languages.length > 0 && (\n                          <Box marginLeft={4}>\n                            <Badge backgroundColor=\"primary600\" textColor=\"neutral1000\">\n                              {values.autogenerated_captions_languages.length}\n                            </Badge>\n                          </Box>\n                        )}\n                    </Flex>\n                  </Tabs.Trigger>\n                  <Tabs.Trigger value=\"custom\">\n                    <Flex justifyContent=\"center\">\n                      <Box>\n                        {formatMessage({\n                          id: getTranslation('ModalNewUpload.tab_captions_custom-label'),\n                          defaultMessage: 'Custom',\n                        })}\n                      </Box>\n                      {values.custom_text_tracks && values.custom_text_tracks.length > 0 && (\n                        <Box marginLeft={4}>\n                          <Badge backgroundColor=\"primary600\" textColor=\"neutral1000\">\n                            {values.custom_text_tracks.length}\n                          </Badge>\n                        </Box>\n                      )}\n                    </Flex>\n                  </Tabs.Trigger>\n                </Tabs.List>\n                <Tabs.Content value=\"autogenerated\">\n                  <Grid.Root gap={4}>\n                    <Grid.Item col={12} direction=\"column\" alignItems=\"start\">\n                      <Box width=\"100%\" paddingTop={4}>\n                        <Field.Root>\n                          <Field.Label>\n                            {formatMessage({\n                              id: getTranslation('ModalNewUpload.autogenerated_languages-label'),\n                              defaultMessage: 'Languages',\n                            })}\n                          </Field.Label>\n                          <MultiSelect\n                            name=\"autogenerated_captions_languages\"\n                            hasError={errors.autogenerated_captions_languages}\n                            value={values.autogenerated_captions_languages?.map((lang) => lang.code)}\n                            onChange={handleAutogeneratedCaptionsLanguagesChange}\n                            withTags={true}\n                          >\n                            {SUPPORTED_MUX_LANGUAGES.map((language) => (\n                              <MultiSelectOption key={language.code} value={language.code}>\n                                {language.label}\n                              </MultiSelectOption>\n                            ))}\n                          </MultiSelect>\n                        </Field.Root>\n                      </Box>\n                    </Grid.Item>\n                  </Grid.Root>\n                </Tabs.Content>\n                <Tabs.Content value=\"custom\">\n                  <Box width=\"100%\" paddingTop={4}>\n                    <CustomTextTrackForm\n                      custom_text_tracks={values.custom_text_tracks || []}\n                      modifyCustomTextTracks={(tracks) => setFieldValue('custom_text_tracks', tracks as any)}\n                    />\n                  </Box>\n                </Tabs.Content>\n              </Tabs.Root>\n            </Box>\n          </Accordion.Content>\n        </Accordion.Item>\n      </Accordion.Root>\n    </Box>\n  );\n}\n\nfunction FieldWrapper(props: React.PropsWithChildren) {\n  return (\n    <Box paddingTop={4} paddingBottom={4}>\n      {props.children}\n    </Box>\n  );\n}\n","import React from 'react';\nimport { useIntl } from 'react-intl';\nimport { Button } from '@strapi/design-system';\nimport { Plus } from '@strapi/icons';\nimport { Layouts, useRBAC } from '@strapi/strapi/admin';\n\nimport pluginPermissions from '../../permissions';\nimport { getTranslation } from '../../utils/getTranslation';\nimport ModalNewUpload from '../modal-new-upload/modal-new-upload';\n\ninterface Props {\n  onUploadNewAssetModalClose?: () => void;\n}\n\nconst Header = (props: Props) => {\n  const { onUploadNewAssetModalClose = () => {} } = props;\n\n  const [isNewUploadOpen, setIsNewUploadOpen] = React.useState<boolean>(false);\n\n  const permissions = React.useMemo(() => {\n    return [pluginPermissions.mainCreate];\n  }, []);\n\n  const { formatMessage } = useIntl();\n  const {\n    allowedActions: { canCreate },\n  } = useRBAC(permissions);\n\n  const handleOnNewUploadClick = () => setIsNewUploadOpen(true);\n\n  const handleOnNewUploadClose = (refresh: boolean) => {\n    setIsNewUploadOpen(false);\n    if (!refresh) return;\n\n    onUploadNewAssetModalClose();\n  };\n\n  return (\n    <>\n      <Layouts.Header\n        title={formatMessage({\n          id: getTranslation('HomePage.section-label'),\n          defaultMessage: 'Mux Video Uploader',\n        })}\n        primaryAction={\n          <Button disabled={!canCreate} startIcon={<Plus />} onClick={handleOnNewUploadClick}>\n            {formatMessage({\n              id: getTranslation('HomePage.new-upload-button'),\n              defaultMessage: 'Upload new assets',\n            })}\n          </Button>\n        }\n      />\n      <ModalNewUpload isOpen={isNewUploadOpen} onToggle={handleOnNewUploadClose} />\n    </>\n  );\n};\n\nexport default Header;\n","import React from 'react';\nimport styled from 'styled-components';\nimport MuxPlayer from '@mux/mux-player-react';\n\nimport { MuxAsset } from '../../../../server/src/content-types/mux-asset/types';\nimport { useSignedTokens } from '../signed-tokens-provider';\nimport pluginPkg from '../../../../package.json';\nimport { PLUGIN_ID } from '../../pluginId';\n\nconst MuxPlayerStyled = styled(MuxPlayer)`\n  width: 100%;\n`;\n\nconst PreviewPlayer = (props: { muxAsset?: MuxAsset }) => {\n  const { muxAsset } = props;\n\n  const [videoToken, setVideoToken] = React.useState<string | null>();\n  const [posterUrl, setPosterUrl] = React.useState<string>(\n    // Empty pixel\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII='\n  );\n  const [storyboardUrl, setStoryboardUrl] = React.useState<string>();\n  const [animatedUrl, setAnimatedUrl] = React.useState<string>();\n  const { video, thumbnail, storyboard, animated } = useSignedTokens();\n\n  const init = async (muxAsset: MuxAsset) => {\n    const { playback_id } = muxAsset;\n    if (muxAsset.playback_id !== null && muxAsset.signed) {\n      const videoToken = await video(muxAsset);\n      const thumbnailToken = await thumbnail(muxAsset);\n      const storyboardToken = await storyboard(muxAsset);\n      const animatedToken = await animated(muxAsset);\n      setVideoToken(videoToken);\n      setPosterUrl(`/${PLUGIN_ID}/thumbnail/${playback_id}?token=${thumbnailToken}`);\n      setStoryboardUrl(`/${PLUGIN_ID}/storyboard/${playback_id}?token=${storyboardToken}`);\n      setAnimatedUrl(`/${PLUGIN_ID}/animated/${playback_id}?token=${animatedToken}`);\n    } else if (muxAsset.playback_id !== null) {\n      setPosterUrl(`/${PLUGIN_ID}/thumbnail/${playback_id}`);\n    }\n  };\n\n  React.useEffect(() => {\n    muxAsset && init(muxAsset);\n  }, []);\n\n  if (!muxAsset?.playback_id || (muxAsset.signed && !videoToken)) return null;\n\n  return (\n    <MuxPlayerStyled\n      playbackId={muxAsset.playback_id}\n      poster={posterUrl}\n      playback-token={videoToken}\n      // Disabled because even though we proxy this request, the images in the VTT still go against\n      // image.mux.com which is causing CSP errors :'(\n      // storyboard-src={storyboardUrl}\n      metadata={{\n        video_id: muxAsset.id,\n        video_title: muxAsset.title,\n        player_name: 'Strapi Admin Dashboard',\n        player_version: pluginPkg.version,\n        page_type: 'Preview Player',\n      }}\n      streamType=\"on-demand\"\n      style={{ display: 'block' }}\n    />\n  );\n};\n\nexport default PreviewPlayer;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Badge, Box, Grid, Typography } from '@strapi/design-system';\nimport { useIntl } from 'react-intl';\n\nimport { MuxAsset } from '../../../../server/src/content-types/mux-asset/types';\nimport { getTranslation } from '../../utils/getTranslation';\n\nconst TypographyWrapped = styled(Typography)`\n  overflow-wrap: break-word;\n`;\n\ninterface Props {\n  muxAsset?: MuxAsset;\n}\n\nconst Summary = (props: Props) => {\n  const { muxAsset } = props;\n\n  const { formatMessage, formatDate, formatTime } = useIntl();\n\n  if (muxAsset === undefined) return null;\n\n  const created_date = formatDate(Date.parse(muxAsset.createdAt));\n  const created_time = formatTime(Date.parse(muxAsset.createdAt));\n  const updated_date = formatDate(Date.parse(muxAsset.updatedAt));\n  const updated_time = formatTime(Date.parse(muxAsset.updatedAt));\n\n  return (\n    <Box padding={4} background=\"neutral100\" hasRadius>\n      <Box paddingBottom={4}>\n        <Box paddingBottom={1}>\n          <Typography variant=\"sigma\" fontWeight=\"bold\" textColor=\"neutral600\" textTransform=\"uppercase\">\n            {formatMessage({\n              id: getTranslation('Common.isReady-label'),\n              defaultMessage: 'State',\n            })}\n          </Typography>\n        </Box>\n        <TypographyWrapped variant=\"pi\" textColor=\"neutral700\">\n          {muxAsset.isReady ? (\n            <Badge active>\n              {formatMessage({\n                id: getTranslation('Common.ready'),\n                defaultMessage: 'Ready',\n              })}\n            </Badge>\n          ) : (\n            <Badge>\n              {formatMessage({\n                id: getTranslation('Common.preparing'),\n                defaultMessage: 'Preparing',\n              })}\n            </Badge>\n          )}\n        </TypographyWrapped>\n      </Box>\n      <Box paddingBottom={4}>\n        <Box paddingBottom={1}>\n          <Typography variant=\"sigma\" fontWeight=\"bold\" textColor=\"neutral600\" textTransform=\"uppercase\">\n            {formatMessage({\n              id: getTranslation('Summary.assetId'),\n              defaultMessage: 'Asset Id',\n            })}\n          </Typography>\n        </Box>\n        <TypographyWrapped variant=\"pi\" textColor=\"neutral700\">\n          {muxAsset.asset_id}\n        </TypographyWrapped>\n      </Box>\n      <Box paddingBottom={4}>\n        <Box paddingBottom={1}>\n          <Typography variant=\"sigma\" fontWeight=\"bold\" textColor=\"neutral600\" textTransform=\"uppercase\">\n            {formatMessage({\n              id: getTranslation('Summary.uploadId'),\n              defaultMessage: 'Upload Id',\n            })}\n          </Typography>\n        </Box>\n        <TypographyWrapped variant=\"pi\" textColor=\"neutral700\">\n          {muxAsset.upload_id}\n        </TypographyWrapped>\n      </Box>\n      <Box paddingBottom={4}>\n        <Box paddingBottom={1}>\n          <Typography variant=\"sigma\" fontWeight=\"bold\" textColor=\"neutral600\" textTransform=\"uppercase\">\n            {formatMessage({\n              id: getTranslation('Summary.playbackId'),\n              defaultMessage: 'Playback Id',\n            })}\n          </Typography>\n        </Box>\n        <TypographyWrapped variant=\"pi\" textColor=\"neutral700\">\n          {muxAsset.playback_id}\n        </TypographyWrapped>\n      </Box>\n      <Box paddingBottom={4}>\n        <Box paddingBottom={1}>\n          <Typography variant=\"sigma\" fontWeight=\"bold\" textColor=\"neutral600\" textTransform=\"uppercase\">\n            {formatMessage({\n              id: getTranslation('Summary.playbackPolicy'),\n              defaultMessage: 'Playback Policy',\n            })}\n          </Typography>\n        </Box>\n        <TypographyWrapped variant=\"pi\" textColor=\"neutral700\">\n          {muxAsset.signed ? 'Signed' : 'Public'}\n        </TypographyWrapped>\n      </Box>\n      <Box>\n        <Grid.Root gap={4}>\n          <Grid.Item col={6} s={12}>\n            <Box>\n              <Box paddingBottom={1}>\n                <Typography variant=\"sigma\" fontWeight=\"bold\" textColor=\"neutral600\" textTransform=\"uppercase\">\n                  {formatMessage({\n                    id: getTranslation('Summary.created'),\n                    defaultMessage: 'Created',\n                  })}\n                </Typography>\n              </Box>\n              <Typography variant=\"pi\" textColor=\"neutral700\">\n                {created_date} {created_time}\n              </Typography>\n            </Box>\n          </Grid.Item>\n          <Grid.Item col={6} s={12}>\n            <Box>\n              <Box paddingBottom={1}>\n                <Typography variant=\"sigma\" fontWeight=\"bold\" textColor=\"neutral600\" textTransform=\"uppercase\">\n                  {formatMessage({\n                    id: getTranslation('Summary.updated'),\n                    defaultMessage: 'Updated',\n                  })}\n                </Typography>\n              </Box>\n              <Typography variant=\"pi\" textColor=\"neutral700\">\n                {updated_date} {updated_time}\n              </Typography>\n            </Box>\n          </Grid.Item>\n        </Grid.Root>\n      </Box>\n    </Box>\n  );\n};\n\nexport default Summary;\n","import React from 'react';\nimport { FormikHelpers, FormikTouched, useFormik } from 'formik';\nimport copy from 'copy-to-clipboard';\nimport {\n  Box,\n  Button,\n  Dialog,\n  Field,\n  Flex,\n  Grid,\n  IconButton,\n  Link,\n  Modal,\n  Status,\n  Textarea,\n  Typography,\n} from '@strapi/design-system';\nimport { useFetchClient, useNotification } from '@strapi/strapi/admin';\nimport { Duplicate, Trash, WarningCircle } from '@strapi/icons';\n\nimport { MuxAsset, MuxAssetUpdate } from '../../../../server/src/content-types/mux-asset/types';\nimport usePluginIntl from '../../utils/use-plugin-intl';\nimport CustomTextTrackForm from '../modal-new-upload/custom-text-track-form';\nimport PreviewPlayer from '../preview-player';\nimport Summary from './summary';\nimport { PLUGIN_ID } from '../../pluginId';\n\nexport default function ModalDetails(props: {\n  onToggle: (refresh: boolean) => void;\n  isOpen: boolean;\n  muxAsset?: MuxAsset;\n  enableUpdate: boolean;\n  enableDelete: boolean;\n}) {\n  const { isOpen, muxAsset, enableUpdate, enableDelete, onToggle = () => {} } = props;\n\n  const { del, put } = useFetchClient();\n  const { formatMessage } = usePluginIntl();\n\n  const deleteButtonRef = React.useRef<HTMLButtonElement>(null);\n\n  const [touchedFields, setTouchedFields] = React.useState<FormikTouched<MuxAssetUpdate>>({});\n  const [showDeleteWarning, setShowDeleteWarning] = React.useState(false);\n  const [deletingState, setDeletingState] = React.useState<'idle' | 'deleting'>('idle');\n  const [codeSnippet, setCodeSnippet] = React.useState<string>('');\n\n  const { toggleNotification } = useNotification();\n\n  React.useEffect(() => {\n    if (!muxAsset) return;\n\n    setCodeSnippet(`<mux-player\n  playback-id=\"${muxAsset?.playback_id}\"\n  playback-token=\"TOKEN\"\n  env-key=\"ENV_KEY\"\n  metadata-video-title=\"${muxAsset?.title}\"\n  controls\n/>`);\n  }, [muxAsset]);\n\n  const subtitles = (muxAsset?.asset_data?.tracks ?? []).filter(\n    (track: any) => track.type === 'text' && track.text_type === 'subtitles' && track.status !== 'errored'\n  );\n\n  const toggleDeleteWarning = () => setShowDeleteWarning((prevState) => !prevState);\n\n  const handleCopyCodeSnippet = () => {\n    copy(codeSnippet);\n\n    toggleNotification({\n      type: 'success',\n      message: formatMessage('ModalDetails.copied-to-clipboard', 'Copied code snippet to clipboard'),\n    });\n  };\n\n  const handleOnDeleteConfirm = async (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDeletingState('deleting');\n    toggleDeleteWarning();\n\n    if (!muxAsset) return;\n\n    try {\n      await del(`${PLUGIN_ID}/mux-asset/${muxAsset.id}`, {\n        params: {\n          delete_on_mux: true,\n        },\n      });\n\n      setDeletingState('idle');\n\n      onToggle(true);\n      toggleNotification({\n        type: 'success',\n        message: formatMessage('ModalDetails.delete-success', 'Video deleted successfully'),\n      });\n    } catch (error) {\n      toggleNotification({\n        type: 'danger',\n        message: formatMessage('ModalDetails.failed-to-delete', 'Failed to delete video'),\n      });\n    }\n  };\n\n  const initialValues: MuxAssetUpdate = {\n    id: muxAsset?.id || 0,\n    title: muxAsset?.title || muxAsset?.asset_id || muxAsset?.createdAt,\n\n    // @ts-expect-error Due to changes in @mux/mux-node v8, where `TextTrack`, `VideoTrack` and `AudioTrack` were unified,\n    // properties required to subtitles as text tracks are showing as optional and breaking the `custom_text_tracks` type.\n    custom_text_tracks: subtitles.map((s) => ({\n      closed_captions: s.closed_captions,\n      file: undefined,\n      language_code: s.language_code,\n      name: s.name,\n      status: s.status,\n      stored_track: s,\n    })),\n  };\n\n  const handleOnSubmit = async (\n    values: MuxAssetUpdate,\n    { setErrors, setSubmitting }: FormikHelpers<MuxAssetUpdate>\n  ) => {\n    const title = formatMessage('Common.title-required', 'No title specified');\n\n    if (!values.title) {\n      setErrors({ title });\n\n      return;\n    }\n\n    const tracksModified =\n      JSON.stringify(values.custom_text_tracks || []) !== JSON.stringify(initialValues.custom_text_tracks || []);\n\n    const data: MuxAssetUpdate = {\n      id: muxAsset?.id || 0,\n      title: touchedFields.title ? values.title : undefined,\n      custom_text_tracks: tracksModified ? values.custom_text_tracks : undefined,\n    };\n\n    if (data.title || data.custom_text_tracks) {\n      await put(`${PLUGIN_ID}/mux-asset/${muxAsset?.id}`, data);\n    }\n\n    setSubmitting(false);\n\n    onToggle(true);\n  };\n\n  const handleOnOpenChange = (open: boolean) => {\n    if (open) return;\n\n    onToggle(false);\n  };\n\n  const { errors, values, isSubmitting, handleChange, handleSubmit, setFieldValue } = useFormik<MuxAssetUpdate>({\n    initialValues,\n    validateOnChange: false,\n    enableReinitialize: true,\n    onSubmit: handleOnSubmit,\n  });\n\n  if (!muxAsset) return null;\n\n  const aspect_ratio = muxAsset.aspect_ratio || muxAsset.asset_data?.aspect_ratio;\n\n  return (\n    <form>\n      <Modal.Root open={isOpen} onOpenChange={handleOnOpenChange}>\n        <Modal.Content\n          style={{\n            width: 'min(90vw, 100rem)',\n            maxWidth: 'unset',\n          }}\n        >\n          <Modal.Header>\n            <Modal.Title>{formatMessage('ModalDetails.header', 'Video details')}</Modal.Title>\n          </Modal.Header>\n          <Modal.Body style={{ paddingInline: 20 }}>\n            {deletingState === 'deleting' ? (\n              <Flex justifyContent=\"center\" padding={4}>\n                <Typography variant=\"omega\" textColor=\"neutral700\">\n                  {formatMessage('ModalDetails.deleting', 'Deleting...')}\n                </Typography>\n              </Flex>\n            ) : (\n              <Grid.Root gap={4} style={{ alignItems: 'flex-start' }}>\n                <Grid.Item col={6} s={12} direction=\"column\" alignItems=\"start\">\n                  <Box\n                    background=\"neutral150\"\n                    style={{\n                      aspectRatio: aspect_ratio ? aspect_ratio.replace(':', ' / ') : undefined,\n                      marginBottom: '1.5rem',\n                      padding: '3rem 0',\n                      position: 'relative',\n                    }}\n                    width=\"100%\"\n                  >\n                    <PreviewPlayer muxAsset={muxAsset} />\n\n                    <Dialog.Root open={showDeleteWarning}>\n                      <Dialog.Trigger>\n                        <IconButton\n                          label={formatMessage('Common.delete-button', 'Delete')}\n                          disabled={!enableDelete}\n                          onClick={toggleDeleteWarning}\n                          withTooltip={false}\n                          ref={deleteButtonRef}\n                          style={{\n                            position: 'absolute',\n                            top: '0.5rem',\n                            right: '0.5rem',\n                          }}\n                        >\n                          <Trash />\n                        </IconButton>\n                      </Dialog.Trigger>\n                      <Dialog.Content>\n                        <Dialog.Header>\n                          {formatMessage(\n                            'ModalDetails.delete-confirmation-prompt',\n                            'Are you sure you want to delete this item?'\n                          )}\n                        </Dialog.Header>\n                        <Dialog.Body>\n                          <Flex padding={4} direction=\"column\" gap={2}>\n                            <Box textAlign=\"center\">\n                              <WarningCircle />\n                            </Box>\n                            <Flex justifyContent=\"center\">\n                              <Typography>\n                                {formatMessage(\n                                  'ModalDetails.delete-confirmation-prompt',\n                                  'Are you sure you want to delete this item?'\n                                )}\n                              </Typography>\n                            </Flex>\n                            <Flex justifyContent=\"center\">\n                              <Typography>\n                                {formatMessage(\n                                  'ModalDetails.delete-confirmation-callout',\n                                  'This will also delete the Asset from Mux.'\n                                )}\n                              </Typography>\n                            </Flex>\n                          </Flex>\n                        </Dialog.Body>\n                        <Dialog.Footer>\n                          <Button onClickCapture={toggleDeleteWarning} variant=\"tertiary\">\n                            {formatMessage('Common.cancel-button', 'Cancel')}\n                          </Button>\n                          <Button variant=\"danger-light\" startIcon={<Trash />} onClickCapture={handleOnDeleteConfirm}>\n                            {formatMessage('Common.confirm-button', 'Confirm')}\n                          </Button>\n                        </Dialog.Footer>\n                      </Dialog.Content>\n                    </Dialog.Root>\n                  </Box>\n\n                  <Box width=\"100%\">\n                    <Field.Root>\n                      <Field.Label>{formatMessage('Captions.title', 'Captions / subtitles')}</Field.Label>\n                      <CustomTextTrackForm\n                        custom_text_tracks={values.custom_text_tracks || []}\n                        modifyCustomTextTracks={(newTracks) => setFieldValue('custom_text_tracks', newTracks)}\n                        muxAsset={muxAsset}\n                      />\n                    </Field.Root>\n                  </Box>\n                </Grid.Item>\n                <Grid.Item col={6} s={12} direction=\"column\" alignItems=\"start\">\n                  {muxAsset.error_message ? (\n                    <Box paddingBottom={4} width=\"100%\">\n                      <Status variant=\"danger\">\n                        <Typography>{muxAsset.error_message}</Typography>\n                      </Status>\n                    </Box>\n                  ) : null}\n                  <Box paddingBottom={4} width=\"100%\">\n                    <Field.Root id=\"with_field\" error={errors.title}>\n                      <Field.Label>{formatMessage('Common.title-label', 'Title')}</Field.Label>\n                      <Field.Input\n                        name=\"title\"\n                        hasError={errors.title !== undefined}\n                        value={values.title}\n                        disabled={!enableUpdate}\n                        required\n                        onChange={(e: any) => {\n                          setTouchedFields({ ...touchedFields, title: true });\n                          handleChange(e);\n                        }}\n                      />\n                      <Field.Error />\n                    </Field.Root>\n                  </Box>\n                  <Box paddingBottom={4} width=\"100%\">\n                    <Summary muxAsset={muxAsset} />\n                  </Box>\n                  <Box paddingBottom={4} width=\"100%\">\n                    <Field.Root\n                      hint={\n                        <>\n                          {formatMessage('ModalDetails.powered-by-mux', 'Powered by mux-player.')}\n                          &nbsp;\n                          <Link href=\"https://docs.mux.com/guides/video/mux-player\" isExternal>\n                            {formatMessage('ModalDetails.read-more', 'Read more about it')}\n                          </Link>\n                        </>\n                      }\n                    >\n                      <Field.Label style={{ alignItems: 'center', justifyContent: 'space-between' }}>\n                        {formatMessage('ModalDetails.code-snippet', 'Code snippet')}\n                        <IconButton\n                          label=\"More actions\"\n                          borderStyle=\"none\"\n                          withTooltip={false}\n                          onClick={handleCopyCodeSnippet}\n                        >\n                          <Duplicate />\n                        </IconButton>\n                      </Field.Label>\n                      <Textarea name=\"codeSnippet\" value={codeSnippet} rows={7} disabled />\n                      <Field.Hint />\n                    </Field.Root>\n                  </Box>\n                </Grid.Item>\n              </Grid.Root>\n            )}\n          </Modal.Body>\n          <Modal.Footer>\n            <Modal.Close>\n              <Button variant=\"tertiary\" onClick={() => onToggle(false)} disabled={deletingState === 'deleting'}>\n                {formatMessage('Common.cancel-button', 'Cancel')}\n              </Button>\n            </Modal.Close>\n            <Button variant=\"success\" disabled={deletingState === 'deleting' || isSubmitting} onClick={handleSubmit}>\n              {formatMessage('Common.finish-button', 'Finish')}\n            </Button>\n          </Modal.Footer>\n        </Modal.Content>\n      </Modal.Root>\n    </form>\n  );\n}\n","import { Box, Grid, Searchbar, SingleSelect, SingleSelectOption } from '@strapi/design-system';\nimport {} from '@strapi/core';\nimport { Layouts, Page, useFetchClient, useRBAC } from '@strapi/strapi/admin';\nimport React from 'react';\nimport { useIntl } from 'react-intl';\nimport { useNavigate, useLocation } from 'react-router-dom';\n\n// @todo - v5 migration this is goofy\nimport { GetMuxAssetsResponse, MuxAsset } from '../../../server/src/content-types/mux-asset/types';\nimport AssetGrid from '../components/asset-grid';\nimport ListPagination from '../components/list-pagination';\nimport pluginPermissions from '../permissions';\nimport { getTranslation } from '../utils/getTranslation';\nimport { appendQueryParameter } from '../utils/url';\nimport { PLUGIN_ID } from '../pluginId';\nimport { SearchField, SearchVector, SortVector } from '../types';\nimport Header from '../components/header';\nimport ModalDetails from '../components/modal-details/modal-details';\nimport SignedTokensProvider from '../components/signed-tokens-provider';\n\nconst ProtectedHomePage = () => (\n  <Page.Protect permissions={[pluginPermissions.mainRead]}>\n    <HomePage />\n  </Page.Protect>\n);\n\nconst HomePage = () => {\n  const location = useLocation();\n  const navigate = useNavigate();\n\n  const { get } = useFetchClient();\n  const { formatMessage } = useIntl();\n\n  const SEARCH_FIELDS = [\n    {\n      label: formatMessage({\n        id: getTranslation('Common.title-search-field'),\n        defaultMessage: 'By Title',\n      }),\n      value: SearchField.BY_TITLE,\n    },\n    {\n      label: formatMessage({\n        id: getTranslation('Common.assetId-search-field'),\n        defaultMessage: 'By Asset Id',\n      }),\n      value: SearchField.BY_ASSET_ID,\n    },\n  ];\n\n  const [isReady, setIsReady] = React.useState<boolean>(false);\n  const [muxAssets, setMuxAssets] = React.useState<GetMuxAssetsResponse | undefined>();\n  const [selectedAsset, setSelectedAsset] = React.useState<MuxAsset | undefined>();\n\n  const [searchField, setSearchField] = React.useState<SearchField>(SEARCH_FIELDS[0].value);\n  const [searchValue, setSearchValue] = React.useState<string | undefined>('');\n  const [pageLimit] = React.useState<number>(12);\n  const [pages, setPages] = React.useState(1);\n  const [page, setPage] = React.useState<number>();\n  const [isDetailsOpen, setIsDetailsOpen] = React.useState<boolean>(false);\n\n  const loadMuxAssets = async () => {\n    if (page === undefined) return;\n\n    let searchVector: SearchVector | undefined = undefined;\n\n    if (searchValue !== undefined && searchValue) {\n      searchVector = {\n        field: searchField,\n        value: searchValue,\n      };\n    }\n\n    const sortVector: SortVector = { field: 'createdAt', desc: true };\n\n    const start = (page - 1) * pageLimit;\n\n    let search;\n\n    switch (searchVector?.field) {\n      case 'by_title': {\n        search = `&filters[title][$containsi]=${searchVector.value}`;\n\n        break;\n      }\n      case 'by_asset_id': {\n        search = `&filters[asset_id][$containsi]=${searchVector.value}`;\n\n        break;\n      }\n      default: {\n        search = '';\n      }\n    }\n\n    const sort = sortVector ? `&sort=${sortVector.field}&order=${sortVector.desc ? 'desc' : 'asc'}` : '';\n\n    const { data } = await get(`${PLUGIN_ID}/mux-asset?start=${start}${sort}&limit=${pageLimit}${search}`);\n\n    const pages = Math.ceil(data.totalCount / pageLimit);\n\n    setMuxAssets(data);\n    setPages(pages);\n  };\n\n  React.useEffect(() => {\n    get(`${PLUGIN_ID}/mux-settings`).then((result) => {\n      const { data } = result;\n\n      setIsReady(data === true);\n    });\n  }, []);\n\n  React.useEffect(() => {\n    const { page, field, value } = Object.fromEntries(new URLSearchParams(location.search));\n    setSearchField((field as SearchField) || SearchField.BY_TITLE);\n    setSearchValue(value);\n\n    if ((value && value !== searchValue) || (field && field !== searchField)) {\n      setPage(1);\n    } else {\n      setPage(parseInt(page) || 1);\n    }\n  }, [location]);\n\n  React.useEffect(() => {\n    loadMuxAssets();\n  }, [page, searchField, searchValue, pageLimit]);\n\n  const permissions = React.useMemo(() => {\n    return [pluginPermissions.mainCreate, pluginPermissions.mainUpdate, pluginPermissions.mainDelete];\n  }, []);\n\n  React.useEffect(() => {\n    if (!selectedAsset) return;\n\n    setIsDetailsOpen(true);\n  }, [selectedAsset]);\n\n  const {\n    isLoading: isLoadingForPermissions,\n    allowedActions: { canCreate, canUpdate, canDelete },\n  } = useRBAC(permissions);\n\n  const handleOnUploadNewAssetModalClose = () => loadMuxAssets();\n\n  const handleOnSearchFieldChange = (field: string) => {\n    navigate(appendQueryParameter(location, { field }));\n  };\n\n  const handleOnSearchValueChange = (event: any) => {\n    navigate(appendQueryParameter(location, { value: event?.target.value || '' }));\n  };\n\n  const handleOnMuxAssetClick = (muxAsset: MuxAsset) => setSelectedAsset(muxAsset);\n\n  const handleOnDetailsClose = (refresh: boolean) => {\n    setIsDetailsOpen(false);\n    setSelectedAsset(undefined);\n    if (!refresh) return;\n\n    loadMuxAssets();\n  };\n\n  if (isLoadingForPermissions) return null;\n\n  return (\n    <SignedTokensProvider>\n      <Layouts.Root>\n        <Page.Main>\n          <Header onUploadNewAssetModalClose={handleOnUploadNewAssetModalClose} />\n          <Layouts.Action\n            startActions={\n              <Grid.Root gap={4}>\n                <Grid.Item col={2} xs={12} s={12}>\n                  <SingleSelect\n                    aria-label={formatMessage({\n                      id: getTranslation('HomePage.search-label'),\n                      defaultMessage: 'Choose the field to search',\n                    })}\n                    placeholder={formatMessage({\n                      id: getTranslation('HomePage.search-placeholder'),\n                      defaultMessage: 'Search field',\n                    })}\n                    value={searchField}\n                    onChange={(value: string) => handleOnSearchFieldChange(value.toString())}\n                  >\n                    {SEARCH_FIELDS.map((searchField) => (\n                      <SingleSelectOption value={searchField.value} key={searchField.value}>\n                        {searchField.label}\n                      </SingleSelectOption>\n                    ))}\n                  </SingleSelect>\n                </Grid.Item>\n                <Grid.Item col={8} xs={12} s={12}>\n                  <Box width=\"100%\">\n                    <Searchbar\n                      name=\"searchbar\"\n                      onClear={() => setSearchValue('')}\n                      value={searchValue}\n                      onChange={handleOnSearchValueChange}\n                      clearLabel={formatMessage({\n                        id: getTranslation('HomePage.clear-label'),\n                        defaultMessage: 'Clear search',\n                      })}\n                    >\n                      {formatMessage({\n                        id: getTranslation('HomePage.searching'),\n                        defaultMessage: 'Searching for Mux assets',\n                      })}\n                    </Searchbar>\n                  </Box>\n                </Grid.Item>\n              </Grid.Root>\n            }\n          />\n          <Layouts.Content>\n            <AssetGrid muxAssets={muxAssets?.items} onMuxAssetClick={handleOnMuxAssetClick} />\n            <ListPagination page={page} pages={pages} />\n          </Layouts.Content>\n        </Page.Main>\n        <ModalDetails\n          isOpen={isDetailsOpen}\n          muxAsset={selectedAsset}\n          enableUpdate={canUpdate}\n          enableDelete={canDelete}\n          onToggle={handleOnDetailsClose}\n        />\n      </Layouts.Root>\n    </SignedTokensProvider>\n  );\n};\n\nexport default ProtectedHomePage;\n","import { Page } from '@strapi/strapi/admin';\nimport { Routes, Route } from 'react-router-dom';\n\nimport HomePage from './HomePage';\n\nconst App = () => {\n  return (\n    <Routes>\n      <Route index element={<HomePage />} />\n      <Route path=\"*\" element={<Page.Error />} />\n    </Routes>\n  );\n};\n\nexport default App;\n"],"names":["muxAsset","page","SearchField","name","files","resetForm","errors","videoToken","values","pages","searchField","HomePage"],"mappings":"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"}